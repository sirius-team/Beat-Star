<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_joystick</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-100</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///변수들 선언

vjs_border_xpos_start=232  // 가상 조이스틱의 처음에 생성될 뷰에 상대적인 x 위치입니다. 조이스틱의 손잡이부분 (손가락을 따라가는부분)이 아닙니다.
vjs_border_ypos_start=view_hview-232   // 가상 조이스틱의 처음에 생성될 뷰에 상대적인 y 위치입니다. 조이스틱의 손잡이부분 (손가락을 따라가는부분)이 아닙니다.

vjs_border_xpos=view_xview+vjs_border_xpos_start //실제 게임상에서의 가상 조이스틱의 위치입니다.
vjs_border_ypos=view_yview+vjs_border_ypos_start //실제 게임상에서의 가상 조이스틱의 위치입니다.


vjs_width=400 // 가상 조이스틱의 가로 길이입니다.
vjs_height=400 // 가상 조이스틱의 세로 길이입니다.

vjs_xpos=0 // 가상 조이스틱의 실제 위치에 상대적인 손잡이부분 (손가락을 따라가는 부분)의 위치입니다.
vjs_ypos=0 // 가상 조이스틱의 실제 위치에 상대적인 손잡이부분 (손가락을 따라가는 부분)의 위치입니다.

vjs_pressed=0 // 가상 조이스틱의 손잡이에 단순히 닿았는지 안닿았는지만 체크할때 쓸 변수입니다.
vjs_finger_pressed=0
// ^ 가상 조이스틱이 손잡이를 눌렀는데 손가락은 조이스틱밖으로 벗어나도 다시 들어오면 그대로 따라다닐수있게 쓸, 손잡이를 '잡고있는'상태인지 저장하는 변수입니다.

vjs_distance=0 // 손잡이와 원래 위치사이의 거리입니다. 
vjs_distance_previous=0 // 손잡이와 원래 위치의 1스탭 이전 거리입니다. 만약 [이 이상으로 더 뻗어나가는 '순간']을 찾고싶을때 vjs_distance변수와 비교하여 쓸수있습니다.
vjs_border_distance=60  // 가상 조이스틱의 웁직이지 않는 밑부분의 반지름입니다.
vjs_maxdist=120 // 손잡이 부분이 손가락을 따라올수있는 최대 거리입니다.
vjs_angle=0 // 손잡이 부분의 각도입니다.


draw_set_color(c_white) 

view_x=x
view_y=y

vjsth_finger=0
image_alpha=0.3
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
if (!vjs_pressed) and (!vjs_finger_pressed) {
if image_alpha&gt;0.1{image_alpha+=-0.01}}
if global.joystick.vjs_finger_pressed=1{
image_alpha=0.3
}
//누르지 않았을시 투명도 조절
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///실제로 눌렸는지 안눌렸는지 확인, 드로우.


vjs_border_xpos=view_xview+vjs_border_xpos_start //뷰가 이동해도 조이스틱이 뷰에 고정되게 좌표를 뷰에 맞춰서 업데이트합니다.
vjs_border_ypos=view_yview+vjs_border_ypos_start //뷰가 이동해도 조이스틱이 뷰에 고정되게 좌표를 뷰에 맞춰서 업데이트합니다.
    

vjs_distance_previous=vjs_distance  //이전 거리를 저장하는 변수를 업데이트합니다.


      
for(nth_finger=0;nth_finger&lt;=4;nth_finger+=1) // 멀티터치는 손가락마다 번호를 매겨 일일히 그 [n번째 마우스]로 체크를하므로, 반복문인 for문으로 모두 체크합니다.
    { 

        if device_mouse_check_button_pressed(nth_finger,mb_left) // 만약 화면어디던 손가락이 눌렸고,
        and point_distance(vjs_border_xpos,vjs_border_ypos,device_mouse_x(nth_finger),device_mouse_y(nth_finger))&lt;=64 // 그 손가락과 나의 사이의 거리가 64 이하라면,
        {vjs_finger_pressed=1; vjsth_finger=nth_finger} // 나를 눌렀다고 변수들을 설정해준다.


        if device_mouse_check_button(nth_finger,mb_left) // 만약 화면 어딘가에 손가락이 눌렸는데,
        and point_distance(vjs_border_xpos,vjs_border_ypos,device_mouse_x(nth_finger),device_mouse_y(nth_finger))&lt;=vjs_maxdist // 그게 최대 거리안에 있다면,
        {vjs_pressed=1} // 나를 눌렀다고 변수들을 설정해준다.
        else{vjs_pressed=0} // 만약 그렇지 않다면 나를 누르지 않았다고 설정해준다.
    
    if device_mouse_check_button_released(nth_finger,mb_left) // 화면에서 마우스를 때면,
    {vjs_finger_pressed=0} // 땠다고 변수들을 업데이트 해줍니다.
    
    if vjs_finger_pressed=1 and vjs_pressed=0 // 조이스틱이 최대로 밖에 있는거라면,
    {
    vjs_xpos=vjs_border_xpos+lengthdir_x(vjs_maxdist,point_direction(vjs_border_xpos,vjs_border_ypos,device_mouse_x(vjsth_finger),device_mouse_y(vjsth_finger)))
    vjs_ypos=vjs_border_ypos+lengthdir_y(vjs_maxdist,point_direction(vjs_border_xpos,vjs_border_ypos,device_mouse_x(vjsth_finger),device_mouse_y(vjsth_finger)))
    // ^ 그래도 계속 각도는 손가락을 바라보게 설정해줍니다.
    }

    //나머지 잡일들을 해줍니다.
    if vjs_pressed and !vjs_finger_pressed vjs_pressed=0;
    
    if vjs_pressed {vjs_xpos=device_mouse_x(nth_finger) vjs_ypos=device_mouse_y(nth_finger) }//if in the bound
    
    if (!vjs_pressed) and (!vjs_finger_pressed) 
    {vjs_xpos+=(vjs_border_xpos-vjs_xpos)/4
     vjs_ypos+=(vjs_border_ypos-vjs_ypos)/4
     }//if not pressed
    
    vjs_angle=point_direction(vjs_border_xpos,vjs_border_ypos,device_mouse_x(nth_finger),device_mouse_y(nth_finger)) //각도와,
    vjs_distance=point_distance(vjs_border_xpos,vjs_border_ypos,vjs_xpos,vjs_ypos) // 거리를 업데이트해줍니다.

    
        if nth_finger=vjsth_finger
        {
        draw_sprite_ext(spr_joystick,0,vjs_border_xpos,vjs_border_ypos,1,1,0,c_white,image_alpha)
        draw_sprite_ext(spr_joystick,1,vjs_xpos,vjs_ypos,1,1,0,c_white,image_alpha) // 나자신을 드로우합니다.
        }
       

    
    if vjs_finger_pressed and (nth_finger=vjsth_finger)
    // ^ 이미 n번째 손가락이 날 눌렀다는걸 확인했는데, 반복문이 계속 실행되어 n+1 번째 손가락이 날 눌렀는지 확인해서 false가 나올 사태를 방지해서 이벤트를 빠져나갑니ㅏㄷ.
    {
    exit;
    }
}




</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
